<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modo Exame LDB - Desafio Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Estilos Gaming Personalizados */
        :root {
            --color-bg: #1a1a2e; /* Roxo Escuro / Noturno */
            --color-primary: #00bcd4; /* Azul El√©trico / Ciano Neon */
            --color-secondary: #ff4081; /* Magenta/Roxo Profundo */
            --color-success: #84cc16; /* Verde El√©trico */
            --color-text: #f4f4f4;
            --color-border: #333366;
            --color-warning: #ffc107; /* Amarelo/Laranja para revis√£o */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .exam-container {
            width: 100%;
            max-width: 900px;
            background-color: #242442; /* Fundo mais claro que o body para contraste */
            border: 2px solid var(--color-border);
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(0, 188, 212, 0.3); /* Brilho neon */
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* HUD - Head-Up Display */
        .hud {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 12px 0;
            border-bottom: 2px solid var(--color-border);
        }
        
        .hud-item {
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            background-color: #333366;
            box-shadow: inset 0 0 5px rgba(0, 188, 212, 0.5);
        }

        .hud-title {
            font-size: 0.8rem;
            color: var(--color-primary);
            text-transform: uppercase;
            font-weight: 700;
        }
        
        /* Ajuste do HUD para o modo Revis√£o */
        .hud-title.review-mode {
            color: var(--color-warning);
        }

        .hud-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--color-text);
        }

        /* √Årea da Quest√£o */
        .question-area {
            background-color: #1a1a2e;
            border-radius: 10px;
            padding: 24px;
            border: 1px solid var(--color-primary);
        }
        
        .question-area.review-mode {
             border: 2px solid var(--color-warning);
        }

        #question-text {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 20px;
        }

        /* Op√ß√µes de Resposta */
        .option-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 8px;
            border-radius: 6px;
            background-color: #333366;
            color: var(--color-text);
            text-align: left;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: 1px solid transparent;
            font-weight: 500;
        }

        .option-button:hover:not(:disabled) {
            background-color: #444477;
            border-color: var(--color-primary);
        }

        /* Feedback Visual */
        .correct {
            background-color: var(--color-success) !important;
            color: #1a1a2e !important;
            font-weight: 700;
            animation: pulse-success 0.5s;
        }

        .incorrect {
            background-color: var(--color-secondary) !important;
            color: var(--color-text) !important;
            font-weight: 700;
            border-color: var(--color-secondary) !important;
            animation: shake 0.3s;
        }
        
        /* Estilo para a Observa√ß√£o/Coment√°rio */
        .observation-text {
            display: block;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.95rem;
            line-height: 1.4;
            background-color: #333366;
            border-left: 5px solid var(--color-primary);
        }
        
        .observation-text.review {
            border-left: 5px solid var(--color-warning);
        }

        /* Efeitos de Anima√ß√£o */
        @keyframes pulse-success {
            0% { transform: scale(1); box-shadow: 0 0 10px var(--color-success); }
            50% { transform: scale(1.02); box-shadow: 0 0 20px var(--color-success); }
            100% { transform: scale(1); box-shadow: 0 0 10px var(--color-success); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* Bot√µes de Navega√ß√£o */
        #prev-button {
            background-color: #4a4e69; /* Cinza/Azul escuro */
            color: var(--color-text);
            padding: 12px 24px;
            font-weight: 700;
            border-radius: 8px;
            transition: background-color 0.2s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        #prev-button:hover:not(:disabled) {
             background-color: #5b607e;
        }
        
        #next-button {
            background-color: var(--color-primary);
            color: var(--color-bg);
            padding: 12px 24px;
            font-weight: 700;
            border-radius: 8px;
            transition: background-color 0.2s;
            box-shadow: 0 4px 15px rgba(0, 188, 212, 0.4);
        }
        
        /* Estilo para bot√µes desativados */
        #next-button:disabled, #prev-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        /* Modal de Fim de Jogo */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: #242442;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 3px solid var(--color-success);
            box-shadow: 0 0 40px rgba(132, 204, 22, 0.7);
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-title {
            font-size: 2.5rem;
            color: var(--color-success);
            font-weight: 900;
            text-transform: uppercase;
        }
        
        .modal-title.review-end {
            color: var(--color-warning);
        }

        .modal-score {
            font-size: 3rem;
            color: var(--color-primary);
            font-weight: 900;
            margin: 15px 0;
        }
        
        .modal-buttons-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-button {
            background-color: var(--color-secondary);
            color: var(--color-text);
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 700;
            transition: background-color 0.2s;
        }
        
        #review-button {
            background-color: var(--color-warning);
            color: #1a1a2e;
        }
        
        #review-button:hover {
            background-color: #ffd764;
        }

        .modal-button:hover {
            background-color: #c93268;
        }
    </style>
</head>
<body>

    <div class="exam-container">
        <!-- HUD - Head-Up Display (Informa√ß√µes do Jogo) -->
        <div class="hud">
            <div class="hud-item">
                <div class="hud-title">Quest√£o</div>
                <div id="question-index" class="hud-value">0/50</div>
            </div>
            <div class="hud-item">
                <div class="hud-title">Acertos (XP)</div>
                <div id="score" class="hud-value text-green-400">0</div>
            </div>
            <div class="hud-item">
                <div class="hud-title">Erros</div>
                <div id="errors" class="hud-value text-red-400">0</div>
            </div>
        </div>

        <!-- √Årea da Quest√£o -->
        <div id="question-container" class="question-area">
            <div id="question-text" class="text-xl font-bold mb-5">
                Caro Bubu üêª, pressione INICIAR para come√ßar o Desafio LDB.
            </div>
            <div id="options-container" class="flex flex-col gap-2">
                <!-- Op√ß√µes ser√£o injetadas aqui -->
            </div>
            <!-- Feedback Message agora comporta o coment√°rio completo -->
            <div id="feedback-container">
                <div id="feedback-message" class="mt-4 text-center font-bold" style="min-height: 24px;"></div>
                <span id="observation-comment" class="observation-text text-gray-300 hidden"></span>
            </div>
        </div>

        <!-- Bot√µes de Controle (Start/Nav) -->
        <div class="flex justify-between">
            <button id="start-button" class="bg-indigo-600 text-white p-3 rounded-lg font-bold hover:bg-indigo-700 transition duration-200">
                INICIAR DESAFIO
            </button>
            
            <!-- Bot√µes de Navega√ß√£o (Escondidos inicialmente) -->
            <div id="nav-buttons" class="flex justify-between w-full" style="display:none;">
                <button id="prev-button" class="bg-gray-600 text-white p-3 rounded-lg font-bold hover:bg-gray-700 transition duration-200 opacity-50" disabled>
                    << ANTERIOR
                </button>
                <button id="next-button" class="bg-cyan-500 text-gray-900 p-3 rounded-lg font-bold hover:bg-cyan-400 transition duration-200 opacity-50" disabled>
                    PR√ìXIMA QUEST√ÉO >>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Fim de Jogo (Resultados) -->
    <div id="finish-modal" class="modal">
        <div class="modal-content">
            <div id="modal-title" class="modal-title">TREINAMENTO CONCLU√çDO!</div>
            <p id="modal-subtitle" class="text-xl text-gray-400 mt-2">Sua Performance Final:</p>
            <div id="final-score" class="modal-score"></div>
            <p id="final-stats" class="text-lg">Voc√™ obteve <span id="final-percentage" class="font-bold text-yellow-400"></span> de aproveitamento.</p>
            
            <div class="modal-buttons-container">
                <!-- Novo bot√£o de Revis√£o de Erros -->
                <button id="review-button" class="modal-button hidden">
                    REVISAR ERROS (<span id="errors-count-review">0</span> Quest√µes)
                </button>
                <button id="restart-button" class="modal-button">REINICIAR MISS√ÉO COMPLETA</button>
            </div>
        </div>
    </div>


    <script>
        // Dados das Quest√µes (Baseado nas 50 quest√µes e gabaritos validados)
        // Adicionado o campo 'c' (coment√°rio/observa√ß√£o)
        const QUESTIONS_DATA = [
            { id: 1, q: "De acordo com a LDB, a educa√ß√£o abrange os processos formativos que se desenvolvem em v√°rios espa√ßos. Entretanto, a lei disciplina predominantemente:", o: ["Os processos de aprendizagem no √¢mbito familiar e comunit√°rio.", "A educa√ß√£o escolar desenvolvida em institui√ß√µes pr√≥prias.", "O ensino n√£o formal praticado em movimentos sociais.", "O desenvolvimento cultural realizado por manifesta√ß√µes art√≠sticas."], a: "B", c: "Art. 1¬∫, ¬ß1¬∫ da LDB: a lei disciplina a educa√ß√£o escolar desenvolvida em institui√ß√µes pr√≥prias." },
            { id: 2, q: "O Art. 4¬∫ da LDB garante o dever do Estado com a educa√ß√£o. Assinale a alternativa que N√ÉO corresponde a um desses deveres:", o: ["Ensino fundamental, obrigat√≥rio e gratuito, inclusive para os que n√£o tiveram acesso na idade pr√≥pria.", "Atendimento gratuito em creches e pr√©-escolas para crian√ßas de zero a seis anos de idade.", "Atendimento educacional especializado gratuito a educandos com necessidades especiais, exclusivamente em escolas especializadas.", "Oferta de ensino noturno regular, adequado √†s condi√ß√µes do educando."], a: "C", c: "O Art. 4¬∫, III, estabelece o atendimento educacional especializado, preferencialmente na rede regular de ensino, e n√£o 'exclusivamente' em escolas especializadas." },
            { id: 3, q: "O direito p√∫blico subjetivo previsto no Art. 5¬∫ da LDB refere-se:", o: ["Ao ensino m√©dio gratuito para todos.", "Ao acesso ao ensino fundamental.", "√Ä matr√≠cula obrigat√≥ria no ensino superior p√∫blico.", "Ao ingresso no sistema de ensino noturno."], a: "B", c: "O Art. 5¬∫, ¬ß1¬∫, define que o acesso ao Ensino Fundamental (obrigat√≥rio) √© direito p√∫blico subjetivo." },
            { id: 4, q: "Segundo a LDB, √© crime de responsabilidade imputado √† autoridade competente quando:", o: ["Deixa de assegurar a gratuidade do ensino superior p√∫blico.", "Descumpre o dever de ofertar o ensino obrigat√≥rio.", "N√£o garante a gest√£o democr√°tica do ensino p√∫blico.", "N√£o implementa a obrigatoriedade da educa√ß√£o infantil."], a: "B", c: "Conforme o Art. 5¬∫, ¬ß4¬∫, descumprir o dever de ofertar o ensino obrigat√≥rio √© crime de responsabilidade." },
            { id: 5, q: "O controle da frequ√™ncia escolar, segundo o Art. 24, √© atribui√ß√£o de:", o: ["Conselho Tutelar.", "Minist√©rio P√∫blico.", "Fam√≠lia do aluno.", "A pr√≥pria escola."], a: "D", c: "O Art. 12, inciso VII, define a escola como respons√°vel pelo controle da frequ√™ncia e informa√ß√£o aos pais." },
            { id: 6, q: "O m√≠nimo de dias letivos anuais exigido pela LDB √© de:", o: ["160 dias, totalizando 720 horas.", "180 dias, totalizando 800 horas.", "200 dias, totalizando 800 horas.", "220 dias, totalizando 1000 horas."], a: "C", c: "O Art. 24, inciso I, fixa 200 dias letivos e 800 horas anuais." },
            { id: 7, q: "O ensino religioso, de matr√≠cula facultativa, segundo a LDB, pode ser oferecido de duas formas:", o: ["Laico e confessional.", "Interconfessional e confessional.", "Cient√≠fico e interconfessional.", "Ecum√™nico e laico."], a: "B", c: "A matr√≠cula √© facultativa e a oferta pode ser de car√°ter confessional (ligada a uma religi√£o) ou interconfessional (diversas religi√µes)." },
            { id: 8, q: "A autonomia universit√°ria prevista na LDB garante √†s universidades:", o: ["Criar cursos livremente, sem necessidade de seguir diretrizes gerais da Uni√£o.", "Elaborar estatutos e regimentos sem restri√ß√µes legais.", "Firmar conv√™nios, aprovar planos de investimento e conferir diplomas.", "Exigir mensalidades mesmo sendo institui√ß√µes p√∫blicas."], a: "C", c: "A autonomia universit√°ria, prevista no Art. 53, inclui fixar curr√≠culos, elaborar estatutos, aprovar planos e conferir diplomas." },
            { id: 9, q: "O percentual m√≠nimo da receita resultante de impostos que os Estados, o Distrito Federal e os Munic√≠pios devem aplicar na manuten√ß√£o e desenvolvimento do ensino √© de:", o: ["15%.", "18%.", "20%.", "25%."], a: "D", c: "Conforme o Art. 212 da CF/88 e Art. 69 da LDB, os Estados, o Distrito Federal e os Munic√≠pios aplicar√£o, no m√≠nimo, 25% da receita de impostos." },
            { id: 10, q: "A LDB determina que a forma√ß√£o de docentes para atuar na educa√ß√£o infantil e nos anos iniciais do ensino fundamental pode ser feita:", o: ["Apenas em n√≠vel superior.", "Em n√≠vel superior, admitida como m√≠nima a forma√ß√£o em n√≠vel m√©dio, na modalidade Normal.", "Apenas em cursos de pedagogia.", "Somente em programas de educa√ß√£o continuada oferecidos por universidades."], a: "B", c: "A forma√ß√£o m√≠nima para atuar na Educa√ß√£o Infantil e Anos Iniciais do Fundamental √© de N√≠vel M√©dio, Modalidade Normal (Art. 62)." },
            { id: 11, q: "A educa√ß√£o escolar deve vincular-se, segundo o Art. 1¬∫, ¬ß2¬∫, principalmente:", o: ["√Ä pr√°tica social e ao mundo do trabalho.", "Ao sistema formal de ensino superior.", "√Ä fam√≠lia e √†s tradi√ß√µes culturais.", "√Ä pesquisa cient√≠fica exclusivamente."], a: "A", c: "A LDB determina a vincula√ß√£o da educa√ß√£o escolar ao mundo do trabalho e √† pr√°tica social (Art. 1¬∫, ¬ß2¬∫)." },
            { id: 12, q: "De acordo com o Art. 2¬∫, a finalidade da educa√ß√£o √©:", o: ["Garantir a igualdade entre os cidad√£os.", "Assegurar a transmiss√£o dos conte√∫dos culturais.", "O pleno desenvolvimento do educando, preparo para a cidadania e qualifica√ß√£o para o trabalho.", "Universalizar o ensino superior."], a: "C", c: "Finalidade da educa√ß√£o (Art. 2¬∫): pleno desenvolvimento, preparo para cidadania e qualifica√ß√£o para o trabalho." },
            { id: 13, q: "O princ√≠pio da gest√£o democr√°tica previsto no Art. 3¬∫ significa:", o: ["Que os diretores s√£o escolhidos diretamente pela comunidade.", "Que deve haver participa√ß√£o de profissionais da educa√ß√£o e comunidade escolar nas decis√µes.", "Que os conselhos escolares s√£o opcionais.", "Que as escolas privadas tamb√©m devem seguir esse modelo."], a: "B", c: "A gest√£o democr√°tica do ensino p√∫blico (Art. 14) √© caracterizada pela participa√ß√£o da comunidade e profissionais na gest√£o." },
            { id: 14, q: "O pluralismo de ideias e concep√ß√µes pedag√≥gicas assegura:", o: ["A conviv√™ncia de diferentes correntes pedag√≥gicas nas institui√ß√µes.", "A exclusividade da metodologia definida pelo MEC.", "A obrigatoriedade de adotar um √∫nico curr√≠culo.", "A padroniza√ß√£o dos m√©todos de ensino."], a: "A", c: "O pluralismo (Art. 3¬∫, III) garante a coexist√™ncia de diversas correntes e m√©todos pedag√≥gicos nas institui√ß√µes." },
            { id: 15, q: "A educa√ß√£o b√°sica obrigat√≥ria gratuita, segundo a LDB, estende-se:", o: ["Apenas at√© o ensino fundamental.", "At√© o ensino m√©dio, progressivamente.", "At√© o ensino superior.", "Apenas at√© a pr√©-escola."], a: "B", c: "A educa√ß√£o b√°sica obrigat√≥ria (4 a 17 anos) abrange a pr√©-escola, o ensino fundamental e o ensino m√©dio (Art. 4¬∫, I)." },
            { id: 16, q: "Quem pode acionar judicialmente o Poder P√∫blico para garantir o direito ao ensino fundamental?", o: ["Apenas o Minist√©rio P√∫blico.", "Apenas os pais ou respons√°veis.", "Qualquer cidad√£o, grupo, entidade ou o Minist√©rio P√∫blico.", "Somente associa√ß√µes comunit√°rias."], a: "C", c: "O Art. 5¬∫, ¬ß5¬∫, permite que qualquer cidad√£o ou entidade legalmente constitu√≠da acione o Poder P√∫blico para garantir o direito ao ensino obrigat√≥rio." },
            { id: 17, q: "A neglig√™ncia da autoridade em garantir o ensino obrigat√≥rio resulta em:", o: ["Perda do cargo.", "Processo administrativo.", "Crime de responsabilidade.", "Multa ao ente federado."], a: "C", c: "A neglig√™ncia da autoridade em prover o ensino obrigat√≥rio constitui crime de responsabilidade (Art. 5¬∫, ¬ß4¬∫)." },
            { id: 18, q: "Cabe √† Uni√£o, entre outras fun√ß√µes, segundo o Art. 9¬∫:", o: ["Estabelecer diretrizes curriculares para o ensino superior.", "Criar apenas escolas t√©cnicas.", "Organizar e manter todos os sistemas de ensino municipais.", "Delegar totalmente suas atribui√ß√µes a Estados e Munic√≠pios."], a: "A", c: "Compete √† Uni√£o estabelecer diretrizes e bases para o ensino de todos os n√≠veis e modalidades (Art. 9¬∫, III)." },
            { id: 19, q: "Aos Estados cabe, prioritariamente, garantir:", o: ["Ensino superior gratuito.", "Ensino fundamental e, com prioridade, o ensino m√©dio.", "Educa√ß√£o infantil e ensino fundamental.", "Apenas ensino t√©cnico-profissional."], a: "B", c: "Os Estados e o DF devem assegurar o ensino fundamental e oferecer, com prioridade, o ensino m√©dio (Art. 10, VI)." },
            { id: 20, q: "Aos Munic√≠pios compete oferecer:", o: ["Educa√ß√£o infantil e ensino fundamental, com prioridade.", "Ensino m√©dio obrigat√≥rio.", "Cursos de p√≥s-gradua√ß√£o.", "Exclusivamente creches."], a: "A", c: "A compet√™ncia priorit√°ria dos Munic√≠pios √© oferecer a Educa√ß√£o Infantil e o Ensino Fundamental (Art. 11, V)." },
            { id: 21, q: "Os estabelecimentos de ensino t√™m como incumb√™ncia, segundo o Art. 12:", o: ["Elaborar sua proposta pedag√≥gica.", "Apenas seguir o curr√≠culo nacional.", "Garantir ensino gratuito.", "Executar normas exclusivamente federais."], a: "A", c: "Estabelecimentos de ensino t√™m a incumb√™ncia de elaborar e executar sua Proposta Pedag√≥gica (Art. 12, I)." },
            { id: 22, q: "Segundo o Art. 13, os docentes t√™m como dever:", o: ["Zelar apenas pela disciplina em sala.", "Elaborar e cumprir plano de trabalho e zelar pela aprendizagem.", "Definir sozinhos a proposta pedag√≥gica da escola.", "Apenas cumprir carga hor√°ria."], a: "B", c: "O dever do docente inclui elaborar e cumprir o plano de trabalho e zelar pela aprendizagem (Art. 13, II e III)." },
            { id: 23, q: "A educa√ß√£o b√°sica, segundo a LDB, √© composta por:", o: ["Educa√ß√£o infantil, ensino fundamental e ensino m√©dio.", "Ensino fundamental e m√©dio.", "Apenas ensino m√©dio.", "Ensino infantil, fundamental, m√©dio e superior."], a: "A", c: "A Educa√ß√£o B√°sica (Art. 21, I) √© composta por Educa√ß√£o Infantil, Ensino Fundamental e Ensino M√©dio." },
            { id: 24, q: "O m√≠nimo de carga hor√°ria anual no ensino fundamental e m√©dio √©:", o: ["600 horas em 180 dias.", "700 horas em 190 dias.", "800 horas em 200 dias.", "1000 horas em 220 dias."], a: "C", c: "A carga hor√°ria m√≠nima √© de 800 horas, distribu√≠das em 200 dias letivos (Art. 24, I)." },
            { id: 25, q: "A frequ√™ncia m√≠nima exigida para aprova√ß√£o √©:", o: ["60%.", "65%.", "70%.", "75%."], a: "D", c: "A LDB exige frequ√™ncia m√≠nima de 75% do total de horas letivas para aprova√ß√£o (Art. 24, VI)." },
            { id: 26, q: "O ensino da Arte √© considerado na LDB como:", o: ["Componente opcional.", "Componente obrigat√≥rio em todos os n√≠veis da educa√ß√£o b√°sica.", "Parte da educa√ß√£o complementar.", "Exclusivo para o ensino m√©dio."], a: "B", c: "O ensino da Arte √© componente curricular obrigat√≥rio da Educa√ß√£o B√°sica (Art. 26, ¬ß2¬∫)." },
            { id: 27, q: "O ensino da Hist√≥ria do Brasil deve levar em conta:", o: ["Apenas o per√≠odo colonial.", "Apenas a contribui√ß√£o europeia.", "As contribui√ß√µes das culturas ind√≠gena, africana e europeia.", "Apenas os marcos pol√≠ticos oficiais."], a: "C", c: "O ensino de Hist√≥ria deve considerar as matrizes ind√≠gena, africana e europeia (Art. 26, ¬ß4¬∫)." },
            { id: 28, q: "A educa√ß√£o f√≠sica √© obrigat√≥ria, mas:", o: ["Facultativa nos cursos noturnos.", "Facultativa apenas no ensino m√©dio.", "Exclusiva da educa√ß√£o infantil.", "Obrigat√≥ria em todas as modalidades."], a: "A", c: "A pr√°tica da Educa√ß√£o F√≠sica √© facultativa nos cursos noturnos (Ensino M√©dio e EJA) e em outras condi√ß√µes espec√≠ficas (Art. 26, ¬ß3¬∫)." },
            { id: 29, q: "O ensino religioso no fundamental √©:", o: ["Obrigat√≥rio para todos.", "Facultativo, confessional ou interconfessional.", "Laico e obrigat√≥rio.", "Restrito √†s escolas privadas."], a: "B", c: "O Ensino Religioso √© facultativo e sua oferta pode ser confessional ou interconfessional (Art. 33)." },
            { id: 30, q: "O ensino m√©dio, segundo o Art. 35, tem como finalidade:", o: ["Apenas habilitar para o trabalho.", "Consolida√ß√£o dos conhecimentos, preparo para cidadania e trabalho, forma√ß√£o √©tica e pensamento cr√≠tico.", "Exclusivamente ingresso no ensino superior.", "Transmiss√£o de conte√∫dos t√©cnicos."], a: "B", c: "Finalidades do Ensino M√©dio (Art. 35): consolida√ß√£o de conhecimentos, preparo para cidadania/trabalho, forma√ß√£o √©tica e pensamento cr√≠tico." },
            { id: 31, q: "O m√≠nimo de idade para exames supletivos de conclus√£o do ensino fundamental √©:", o: ["14 anos.", "15 anos.", "16 anos.", "18 anos."], a: "B", c: "Idade m√≠nima para exames supletivos do Ensino Fundamental: 15 anos (Art. 38, ¬ß1¬∫, I)." },
            { id: 32, q: "O m√≠nimo de idade para exames supletivos de conclus√£o do ensino m√©dio √©:", o: ["16 anos.", "17 anos.", "18 anos.", "20 anos."], a: "C", c: "Idade m√≠nima para exames supletivos do Ensino M√©dio: 18 anos (Art. 38, ¬ß1¬∫, II)." },
            { id: 33, q: "A educa√ß√£o profissional deve estar integrada:", o: ["Apenas ao ensino m√©dio.", "√Ä educa√ß√£o, ao trabalho, √† ci√™ncia e √† tecnologia.", "Somente ao mercado de trabalho.", "Apenas ao ensino superior."], a: "B", c: "A Educa√ß√£o Profissional integra-se √† educa√ß√£o, ao trabalho, √† ci√™ncia e √† tecnologia (Art. 39, ¬ß2¬∫)." },
            { id: 34, q: "Os diplomas de cursos t√©cnicos de n√≠vel m√©dio, quando registrados, t√™m:", o: ["Validade regional.", "Validade nacional.", "Validade apenas na institui√ß√£o de origem.", "Validade apenas para concursos p√∫blicos."], a: "B", c: "Diplomas t√©cnicos de n√≠vel m√©dio, quando registrados, t√™m validade nacional (Art. 41)." },
            { id: 35, q: "A dura√ß√£o m√≠nima do ano letivo na educa√ß√£o superior √© de:", o: ["160 dias.", "180 dias.", "200 dias.", "220 dias."], a: "C", c: "O ano letivo na Educa√ß√£o Superior deve ter, no m√≠nimo, 200 dias de trabalho acad√™mico efetivo (Art. 47, II)." },
            { id: 36, q: "√â obrigat√≥ria a oferta de cursos noturnos de gradua√ß√£o nas institui√ß√µes:", o: ["Privadas.", "P√∫blicas.", "Comunit√°rias.", "Confessionais."], a: "B", c: "A oferta de cursos noturnos de gradua√ß√£o √© obrigat√≥ria nas institui√ß√µes p√∫blicas de educa√ß√£o superior (Art. 47, ¬ß7¬∫)." },
            { id: 37, q: "Para ser considerada universidade, a institui√ß√£o precisa ter:", o: ["Ao menos 50% do corpo docente com doutorado.", "Ao menos 1/3 do corpo docente com mestrado ou doutorado e 1/3 em tempo integral.", "Apenas laborat√≥rios de pesquisa.", "Cursos em todas as √°reas do conhecimento."], a: "B", c: "Requisito para Universidade (Art. 52, II): ter no m√≠nimo 1/3 do corpo docente com mestrado ou doutorado e 1/3 em tempo integral." },
            { id: 38, q: "As universidades t√™m autonomia para:", o: ["Criar cursos independentemente das diretrizes nacionais.", "Fixar curr√≠culos, elaborar estatutos e firmar conv√™nios.", "Cobrar mensalidade em institui√ß√µes p√∫blicas.", "Exigir matr√≠cula obrigat√≥ria em programas de extens√£o."], a: "B", c: "As universidades podem fixar curr√≠culos, elaborar estatutos e firmar conv√™nios dentro de sua autonomia did√°tico-cient√≠fica, administrativa e de gest√£o (Art. 53)." },
            { id: 39, q: "O professor do ensino superior em institui√ß√µes p√∫blicas deve cumprir:", o: ["6 horas semanais de aula.", "8 horas semanais de aula.", "12 horas semanais de aula.", "20 horas semanais de aula."], a: "B", c: "O regime de trabalho do professor universit√°rio √© determinado pelas institui√ß√µes, mas o regime de tempo integral √© o padr√£o esperado para dedica√ß√£o √† pesquisa e ensino." },
            { id: 40, q: "A educa√ß√£o especial deve ser oferecida:", o: ["Apenas em escolas especializadas.", "Preferencialmente na rede regular de ensino.", "Exclusivamente em classes especiais.", "Apenas em institui√ß√µes privadas."], a: "B", c: "A Educa√ß√£o Especial deve ser oferecida preferencialmente na rede regular de ensino (Art. 58, ¬ß1¬∫)." },
            { id: 41, q: "A Uni√£o deve garantir aos povos ind√≠genas:", o: ["Ensino bil√≠ngue e intercultural.", "Ensino apenas em portugu√™s.", "Ensino religioso obrigat√≥rio.", "Ensino t√©cnico-profissional exclusivo."], a: "A", c: "A educa√ß√£o escolar para os povos ind√≠genas deve ser bil√≠ngue e intercultural (Art. 78, I)." },
            { id: 42, q: "A educa√ß√£o a dist√¢ncia, segundo a LDB, depende de:", o: ["Autoriza√ß√£o da escola.", "Credenciamento espec√≠fico pela Uni√£o.", "Exclusivamente da iniciativa privada.", "Apenas da aprova√ß√£o dos alunos."], a: "B", c: "A Educa√ß√£o a Dist√¢ncia depende de credenciamento espec√≠fico do sistema de ensino (Art. 80, ¬ß1¬∫)." },
            { id: 43, q: "Cursos experimentais s√£o permitidos se:", o: ["Forem autorizados pelo MEC sem condi√ß√µes.", "Obedecerem √†s disposi√ß√µes da LDB.", "Exclusivamente em institui√ß√µes privadas.", "Voltados apenas ao ensino superior."], a: "B", c: "Cursos ou institui√ß√µes experimentais s√£o permitidos, desde que obede√ßam √†s disposi√ß√µes da LDB (Art. 81)." },
            { id: 44, q: "O est√°gio de alunos do ensino m√©dio ou superior N√ÉO estabelece:", o: ["Bolsa de est√°gio.", "Cobertura previdenci√°ria.", "V√≠nculo empregat√≠cio.", "Seguro contra acidentes."], a: "C", c: "O est√°gio n√£o estabelece v√≠nculo empregat√≠cio, apenas seguro contra acidentes, bolsa e regime de frequ√™ncia (Art. 82, Par√°grafo √∫nico)." },
            { id: 45, q: "O ensino militar √© regulado por:", o: ["A pr√≥pria LDB.", "Lei espec√≠fica.", "Portaria ministerial.", "Regulamento das For√ßas Armadas."], a: "B", c: "O Ensino Militar √© regulado por lei espec√≠fica, e n√£o pela LDB (Art. 83)." },
            { id: 46, q: "Quem pode exigir a abertura de concurso para professor p√∫blico ocupado irregularmente?", o: ["Apenas o Minist√©rio P√∫blico.", "Apenas sindicatos.", "Qualquer cidad√£o habilitado com titula√ß√£o pr√≥pria.", "Apenas o Conselho de Educa√ß√£o."], a: "C", c: "O Art. 85 permite que qualquer cidad√£o habilitado exija concurso p√∫blico para cargos ocupados irregularmente." },
            { id: 47, q: "A D√©cada da Educa√ß√£o foi institu√≠da para iniciar-se:", o: ["Imediatamente ap√≥s a publica√ß√£o da LDB.", "Um ano ap√≥s a publica√ß√£o da LDB.", "Dois anos ap√≥s a publica√ß√£o da LDB.", "Cinco anos ap√≥s a publica√ß√£o da LDB."], a: "B", c: "A D√©cada da Educa√ß√£o foi institu√≠da para iniciar um ano ap√≥s a publica√ß√£o da LDB (Art. 87, caput). A LDB foi publicada em 1996." },
            { id: 48, q: "Durante a D√©cada da Educa√ß√£o, o Poder P√∫blico deveria recensear, prioritariamente:", o: ["Crian√ßas de 0 a 6 anos.", "Grupos de 7 a 14 e de 15 a 16 anos.", "Jovens at√© 18 anos.", "Adultos n√£o escolarizados."], a: "B", c: "Prioridade de recenseamento na D√©cada da Educa√ß√£o: grupos de 7 a 14 e de 15 a 16 anos (Art. 87, ¬ß3¬∫, III)." },
            { id: 49, q: "At√© o fim da D√©cada da Educa√ß√£o, seriam admitidos como professores:", o: ["Apenas com n√≠vel m√©dio.", "Apenas habilitados em n√≠vel superior ou com treinamento em servi√ßo.", "Apenas p√≥s-graduados.", "Apenas doutores."], a: "B", c: "Ao fim da D√©cada da Educa√ß√£o, s√≥ seriam admitidos professores com n√≠vel superior ou com forma√ß√£o em n√≠vel m√©dio na modalidade Normal (Art. 87, ¬ß4¬∫)." },
            { id: 50, q: "O prazo para que universidades cumprissem os requisitos de titula√ß√£o docente do Art. 52 foi de:", o: ["5 anos.", "8 anos.", "10 anos.", "15 anos."], a: "B", c: "O prazo para adequa√ß√£o dos requisitos de titula√ß√£o docente para universidades (Art. 52) era de 8 anos (Art. 87, ¬ß5¬∫)." },
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let errors = 0;
        
        // Armazena a resposta (letra) de cada quest√£o pelo √çNDICE no QUESTIONS_DATA.
        let userAnswers = new Array(QUESTIONS_DATA.length).fill(null); 
        
        // Novo: Conjunto de quest√µes ativas (pode ser o QUESTIONS_DATA completo ou apenas os erros)
        let activeQuestions = QUESTIONS_DATA;
        let isReviewMode = false;

        const questionContainer = document.getElementById('question-container');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const startButton = document.getElementById('start-button');
        const navButtons = document.getElementById('nav-buttons');
        const scoreElement = document.getElementById('score');
        const errorsElement = document.getElementById('errors');
        const questionIndexElement = document.getElementById('question-index');
        const feedbackMessage = document.getElementById('feedback-message');
        const observationComment = document.getElementById('observation-comment');
        const finishModal = document.getElementById('finish-modal');
        const restartButton = document.getElementById('restart-button');
        const reviewButton = document.getElementById('review-button'); // Novo bot√£o
        const modalTitle = document.getElementById('modal-title');
        const modalSubtitle = document.getElementById('modal-subtitle');
        const finalStats = document.getElementById('final-stats');

        // Mapeia as op√ß√µes para as letras (A, B, C, D)
        const optionLetters = ['A', 'B', 'C', 'D'];

        /**
         * Recalcula a pontua√ß√£o total com base nas respostas salvas (userAnswers) no modo normal.
         */
        function updateScore() {
            let newScore = 0;
            let newErrors = 0;
            
            // Sempre itera sobre o conjunto COMPLETO de quest√µes para recalcular o score geral
            QUESTIONS_DATA.forEach((question, index) => {
                const selectedAnswer = userAnswers[index];
                if (selectedAnswer !== null) {
                    if (selectedAnswer === question.a) {
                        newScore++;
                    } else {
                        newErrors++;
                    }
                }
            });
            score = newScore;
            errors = newErrors;
            updateHUD();
        }

        /**
         * Atualiza os dados do HUD (Score, Erros, √çndice)
         */
        function updateHUD() {
            scoreElement.textContent = score;
            errorsElement.textContent = errors;
            
            const totalQuestions = activeQuestions.length;
            const displayIndex = currentQuestionIndex < totalQuestions ? currentQuestionIndex + 1 : totalQuestions;
            
            questionIndexElement.textContent = `${displayIndex}/${totalQuestions}`;
            
            // Estilo do HUD no modo Revis√£o
            const hudTitles = document.querySelectorAll('.hud-title');
            hudTitles.forEach(title => title.classList.toggle('review-mode', isReviewMode));
        }

        /**
         * Inicializa o jogo no modo normal (todas as quest√µes).
         */
        function startGame() {
            isReviewMode = false;
            activeQuestions = QUESTIONS_DATA;
            questionContainer.classList.remove('review-mode');
            
            startButton.style.display = 'none';
            navButtons.style.display = 'flex';
            currentQuestionIndex = 0;
            score = 0;
            errors = 0;
            userAnswers.fill(null);
            updateHUD();
            loadQuestion();
        }
        
        /**
         * Inicializa o modo de Revis√£o de Erros.
         */
        function startReviewMode() {
            finishModal.classList.remove('active');
            isReviewMode = true;
            
            // 1. Filtra as quest√µes que foram respondidas incorretamente
            activeQuestions = QUESTIONS_DATA.filter((question, index) => userAnswers[index] !== question.a && userAnswers[index] !== null);
            
            if (activeQuestions.length === 0) {
                 // Caso o usu√°rio tente clicar, mas n√£o tenha erros (improv√°vel pelo bot√£o estar escondido)
                alert("Parab√©ns! Nenhuma quest√£o para revisar.");
                restartGame();
                return;
            }

            // 2. Configura a UI para o modo Revis√£o
            currentQuestionIndex = 0;
            startButton.style.display = 'none';
            navButtons.style.display = 'flex';
            questionContainer.classList.add('review-mode');
            
            // 3. Carrega a primeira quest√£o de erro
            updateHUD();
            loadQuestion();
        }


        /**
         * Carrega e exibe a quest√£o atual (do conjunto ativo), aplicando o estado de resposta salvo.
         */
        function loadQuestion() {
            if (currentQuestionIndex >= activeQuestions.length) {
                // Fim do conjunto de quest√µes (seja o completo ou a revis√£o)
                if (isReviewMode) {
                    showReviewEndModal();
                } else {
                    showResultsModal();
                }
                return;
            }

            const currentQuestion = activeQuestions[currentQuestionIndex];
            
            // No modo normal, o √≠ndice de userAnswers √© o mesmo que activeQuestions.
            // No modo revis√£o, precisamos encontrar o √≠ndice original da quest√£o no QUESTIONS_DATA
            const originalIndex = QUESTIONS_DATA.findIndex(q => q.id === currentQuestion.id);
            const savedAnswer = userAnswers[originalIndex];
            
            // Atualiza o texto da quest√£o, do HUD e do container de feedback
            questionTextElement.textContent = `[Q${currentQuestion.id}] ${currentQuestion.q}`;
            optionsContainer.innerHTML = '';
            feedbackMessage.innerHTML = '';
            observationComment.textContent = '';
            observationComment.classList.add('hidden');
            
            // L√≥gica para desabilitar/habilitar bot√µes de navega√ß√£o
            prevButton.disabled = currentQuestionIndex === 0;
            prevButton.classList.toggle('opacity-50', currentQuestionIndex === 0);

            if (currentQuestionIndex === activeQuestions.length - 1) {
                nextButton.textContent = isReviewMode ? 'FINALIZAR REVIS√ÉO >>' : 'FINALIZAR DESAFIO >>';
            } else {
                nextButton.textContent = 'PR√ìXIMA QUEST√ÉO >>';
            }

            // No modo revis√£o, o bot√£o PR√ìXIMA deve estar sempre ativo, pois a resposta j√° foi dada.
            // No modo normal, ele s√≥ ativa ap√≥s a resposta
            if (isReviewMode) {
                nextButton.disabled = false;
                nextButton.classList.remove('opacity-50');
            } else {
                nextButton.disabled = !savedAnswer;
                nextButton.classList.toggle('opacity-50', !savedAnswer);
            }

            currentQuestion.o.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = `${optionLetters[index]}) ${option}`;
                button.dataset.answer = optionLetters[index];
                
                // O clique salva a resposta e recarrega a quest√£o
                button.onclick = () => selectAnswer(button, currentQuestion.a, originalIndex);
                
                // Se a quest√£o j√° foi respondida (em qualquer modo), aplica feedback visual
                if (savedAnswer) {
                    // No modo revis√£o, desabilitamos o bot√£o para focar na resposta.
                    // No modo normal, desabilitamos AP√ìS o primeiro clique, mas ele √© reabilitado no final de selectAnswer
                    button.disabled = isReviewMode; 
                    
                    if (button.dataset.answer === currentQuestion.a) {
                        button.classList.add('correct');
                    } else if (button.dataset.answer === savedAnswer) {
                        button.classList.add('incorrect');
                    }
                }
                optionsContainer.appendChild(button);
            });
            
            // Exibe o feedback de resposta salva COM COMENT√ÅRIO
            if (savedAnswer) {
                // Reabilita os bot√µes no modo normal para permitir a mudan√ßa de resposta
                if (!isReviewMode) {
                    Array.from(optionsContainer.children).forEach(btn => btn.disabled = false);
                }

                const comment = currentQuestion.c || "Nenhuma observa√ß√£o dispon√≠vel para esta quest√£o.";
                
                if (savedAnswer === currentQuestion.a) {
                    feedbackMessage.innerHTML = `‚úÖ **ACERTO CR√çTICO!** Voc√™ escolheu **${savedAnswer}**.`;
                    feedbackMessage.style.color = 'var(--color-success)';
                } else {
                    feedbackMessage.innerHTML = `‚ùå **ERRO**. Voc√™ escolheu **${savedAnswer}**. A correta √© **${currentQuestion.a}**.`;
                    feedbackMessage.style.color = 'var(--color-secondary)';
                }
                
                // Exibe o coment√°rio
                observationComment.textContent = `OBSERVA√á√ÉO: ${comment}`;
                observationComment.classList.remove('hidden');
                observationComment.classList.toggle('review', isReviewMode);
            }
        }

        /**
         * Lida com a sele√ß√£o de resposta pelo usu√°rio
         * @param {HTMLButtonElement} selectedButton - O bot√£o clicado
         * @param {string} correctAnswer - A letra da resposta correta
         * @param {number} originalIndex - O √≠ndice da quest√£o no QUESTIONS_DATA
         */
        function selectAnswer(selectedButton, correctAnswer, originalIndex) {
            // S√≥ permite responder no modo normal (fora da revis√£o)
            if (isReviewMode) return;
            
            const selectedAnswer = selectedButton.dataset.answer;
            
            // 1. Armazena a nova resposta no array principal
            userAnswers[originalIndex] = selectedAnswer;
            
            // 2. Recalcula e atualiza o placar
            updateScore();
            
            // 3. Recarrega a quest√£o para aplicar o novo feedback visual (cores e coment√°rio)
            loadQuestion();
        }

        /**
         * Carrega a pr√≥xima quest√£o (ou finaliza o jogo)
         */
        function nextQuestion() {
            if (currentQuestionIndex < activeQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // √öltima quest√£o do conjunto (Completo ou Revis√£o)
                if (isReviewMode) {
                    showReviewEndModal();
                } else {
                    showResultsModal();
                }
            }
        }
        
        /**
         * Carrega a quest√£o anterior
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        /**
         * Exibe o modal de resultados final (Fim de Jogo Normal)
         */
        function showResultsModal() {
            finishModal.classList.add('active');
            
            const totalQuestions = QUESTIONS_DATA.length;
            const percentage = ((score / totalQuestions) * 100).toFixed(1);
            
            // Verifica a quantidade de erros para habilitar o bot√£o de revis√£o
            const errorsCount = errors;
            
            // Configura√ß√£o do Modal
            modalTitle.textContent = 'TREINAMENTO CONCLU√çDO!';
            modalTitle.classList.remove('review-end');
            modalSubtitle.textContent = 'Sua Performance Final:';
            finalStats.innerHTML = `Voc√™ obteve <span id="final-percentage" class="font-bold text-yellow-400">${percentage}%</span> de aproveitamento.`;

            document.getElementById('final-score').textContent = `${score}/${totalQuestions}`;
            
            if (errorsCount > 0) {
                reviewButton.classList.remove('hidden');
                document.getElementById('errors-count-review').textContent = errorsCount;
            } else {
                reviewButton.classList.add('hidden');
            }
        }
        
        /**
         * Exibe o modal ap√≥s o fim da Revis√£o de Erros.
         */
        function showReviewEndModal() {
            finishModal.classList.add('active');
            
            // Configura√ß√£o do Modal para o fim da revis√£o
            modalTitle.textContent = 'REVIS√ÉO DE ERROS FINALIZADA!';
            modalTitle.classList.add('review-end');
            modalSubtitle.textContent = 'Esperamos que tenha fixado o conte√∫do.';
            document.getElementById('final-score').textContent = '‚úÖ';
            finalStats.innerHTML = `Voc√™ revisou ${activeQuestions.length} quest√µes com erro.`;
            reviewButton.classList.add('hidden'); // N√£o faz sentido revisar erros da revis√£o
        }

        /**
         * Reseta todas as vari√°veis e reinicia o jogo para o estado inicial.
         */
        function restartGame() {
            finishModal.classList.remove('active');
            startButton.style.display = 'block';
            navButtons.style.display = 'none';
            questionContainer.classList.remove('review-mode');
            
            // Mensagem de in√≠cio personalizada
            questionTextElement.textContent = 'Caro Bubu üêª, pressione INICIAR para come√ßar o Desafio LDB.';
            
            optionsContainer.innerHTML = '';
            nextButton.disabled = true;
            nextButton.classList.add('opacity-50');
            feedbackMessage.innerHTML = '';
            observationComment.textContent = '';
            observationComment.classList.add('hidden');
            
            currentQuestionIndex = 0;
            score = 0;
            errors = 0;
            userAnswers.fill(null);
            activeQuestions = QUESTIONS_DATA;
            isReviewMode = false;
            updateHUD();
        }


        // Associa Event Listeners aos bot√µes
        startButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', nextQuestion);
        prevButton.addEventListener('click', prevQuestion);
        restartButton.addEventListener('click', restartGame);
        reviewButton.addEventListener('click', startReviewMode); // Novo Listener

        // Configura o estado inicial (bot√µes desativados)
        updateHUD();

    </script>
</body>
</html>
